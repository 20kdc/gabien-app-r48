
 * This is released into the public domain.
 * No warranty is provided, implied or otherwise.

 (highly incomplete) database schema

 LIST OF THINGS TO PERFORM WHEN DONE
 Dictionary unification
 'MapContext'

 ---

.rpg_actor_equipment_block
]0 weapon item_or_none_id
]1 shield item_or_none_id
]2 armour item_or_none_id
]3 helmet item_or_none_id
]4 accessory item_or_none_id

 Actors apparently have a second unused equip set
 I'm ignoring this for now

]5 _ item_or_none_id
]6 _ item_or_none_id
]7 _ item_or_none_id
]8 _ item_or_none_id
]9 _ item_or_none_id


.rpg_actor_parameter_block
C name Interp.rpg_actor_parameter_block ]0 ]1 ]2 ]3 ]4 ]5 | HP:#A MP:#B ATK:#C DEF:#D SPI:#E AGI:#F
]0 maxHp int
]1 maxMp int
]2 atk int
]3 def int
]4 spi int
]5 agi int

: RPG::Learning
@level int= 1
@skill skill_id

.actorpage_graphics
@character_name string
@character_index int
@character_blend_mode boolean
+internal_EPGD

: RPG::Actor
C name Class.RPG::Actor @name | #A
@name string
@title string
+subwindow[ Graphics ] actorpage_graphics
@face_name string
@face_index int
@init_level int
@init_level_exp int
@each_level_exp_p int
@each_level_exp_modc int
@final_level int
@battle_auto boolean
@battle_super_guard boolean
@battle_parameters subwindow array 0 subwindow[ @rpg_actor_parameter_block ] rpg_actor_parameter_block
@battle_skillspanel_name string
@battle_posx_2k3 int
@battle_posy_2k3 int
@battler_anim_2k3 battleranimation_id
@can_crit boolean
@crit_percent boolean
@dual_wield boolean
@lock_equipment boolean
@equipment rpg_actor_equipment_block
@no_weapon_attack_anim animation_id
@class_2k3 class_id
@learn_skills subwindow array 0 RPG::Learning
@rename_allow boolean
@state_ranks subwindow array 0 int
@attribute_ranks subwindow array 0 int
@battle_commands_2k3 subwindow array 0 battlecommand_id

 ---

> rpg_skill_mod_attributes array 0 boolean

: RPG::BattlerAnimationData
e rpg_badia_movetype 0 none 1 step 2 jump 3 move
@move_type rpg_badia_movetype
@afterimage_type int_boolean
@pose int

: RPG::Skill
C name Class.RPG::Skill @name | #A
+rpg_skill_sect0
+subwindow[ User Feedback ] rpg_skill_sect2
+subwindow[ Cost / Chance ] rpg_skill_sect3
+subwindow[ Result ] rpg_skill_sect4

.rpg_skill_sect0
@name string
@description string
e rpg_skill_type 0 normal 1 transporter 2 battleEscape 3 switchControl 4 subSkill2k3
@type rpg_skill_type
e rpg_skill_scope 0 hurtEnemy 1 hurtAllEnemies 2 healUserActor 3 healAnyActor 4 healAllActors
@scope_n_healing rpg_skill_scope
@switch_control_target switch_id
@usable_in_battle boolean
@usable_outside_battle boolean
@required_attrs subwindow rpg_skill_mod_attributes

.rpg_skill_sect2
@animation animation_id
@sound RPG::Sound
@use_text_1_2KO string
@use_text_2_2KO string
e rpg_skill_fm 0 A 1 B 2 C 3 dodge
@failure_message_2KO rpg_skill_fm
@battler_anim_default actor_id
@battler_anim_data subwindow hash actor_id RPG::BattlerAnimationData

.rpg_skill_sect3
@sp_cost_percent boolean
@sp_cost_val_percent int
@sp_cost_val_normal int
@hit_chance int= 100
@base_dmg int
@phys_dmg_frac20 int
@mag_dmg_frac20 int
@ignore_def boolean
@variance int

.rpg_skill_sect4
@mod_hp boolean
@mod_sp boolean
@mod_atk boolean
@mod_def boolean
@mod_spi boolean
@mod_agi boolean
@req_target_sp_nz boolean
@add_states_2k3 boolean
@mod_states subwindow array 0 boolean
@affect_target_attr_defence boolean

 ---

 Is this even used???
: RPG::ItemAnimation
@type int
@movement rpg_badia_movetype
@battle_anim animation_id
@after_image int_boolean
@attacks int
@weapon_anim_idx int
@ranged boolean
@ranged_anim_idx int
e rpg_ia_speed 0 fast 1 medium 2 slow
@ranged_speed rpg_ia_speed

e rpg_item_type 0 normal 1 weapon 2 shield 3 armour 4 helmet 5 accessory 6 medicine 7 skillLearn2k3 8 material 9 special 10 switch
e rpg_item_rtarget 0 single 1 centre 2 allAtSameTime 3 allInSequence
E rpg_item_usecount Uses 0 Unlimited
: RPG::Item
C name Class.RPG::Item @name | #A
@name string
@description string
@animation animation_id
@type rpg_item_type
@price int
+subwindow[ Equip Stats ] rpg_item_sect0
@use_count rpg_item_usecount
@use_sp_cost int
@actors_allowed subwindow[ If unlisted, default 'true' ] hash actor_id boolean
+subwindow[ Use: 2k3 Skill (weapon/shield/armour/helmet/accessory/skillLearn2k3) ] rpg_item_sect1
+subwindow[ Use: Medicine ] rpg_item_sect2
+subwindow[ Use: Material ] rpg_item_sect3
+subwindow[ Use: Switch ] rpg_item_sect4
+subwindow[ Weapon Data ] rpg_item_sect-1
@state_set subwindow[ weapon adds / medicine removes ] hash state_id boolean

.rpg_item_sect-1
@dead_only boolean
@sit_map_2 boolean
@hit_chance int= 90
@crit_chance int
@attack_preemptive boolean
@dual_attack boolean
@attack_all boolean
@ignore_evasion boolean
@prevent_crit boolean
@raise_evasion boolean
@attr_set subwindow hash attribute_id boolean
@class_set_2k3 subwindow hash class_id boolean
@state_chance int
@state_effect boolean
@weapon_anim_def_2k3 actor_id
@weapon_anim_data_2k3 subwindow hash actor_id RPG::ItemAnimation
@ranged_target rpg_item_rtarget
@ranged_return int_boolean
@two_handed boolean

.rpg_item_sect0
@equipbuff_atk int
@equipbuff_def int
@equipbuff_spi int
@equipbuff_agi int
@no_terrain_damage boolean
@cursed_2k3 boolean
@half_sp_cost boolean

.rpg_item_sect1
@use_skill_2k3 boolean
@skill_use_item_msg_2k3 int_boolean
@skill_id_2k3 skill_id

.rpg_item_sect2
@entire_party boolean
@recover_hp_rate int
@recover_hp int
@recover_sp_rate int
@recover_sp int
@medicine_only_on_map boolean

.rpg_item_sect3
@usebuff_maxhp int
@usebuff_maxsp int
@usebuff_atk int
@usebuff_def int
@usebuff_spi int
@usebuff_agi int

.rpg_item_sect4
@switch_only_in_battle boolean
@switch_id switch_id

 ---

: RPG::Enemy
: RPG::Troop
: RPG::Terrain
: RPG::Attribute

 ---

e rpg_state_restriction 0 noRestrict 1 cannotAct 2 onlyAttackEnemy 3 onlyAttackAlly
e rpg_state_affecttype 0 halfParams 1 doubleParams 2 leaveParamsAlone
e rpg_state_changetype 0 lose 1 gain 2 nothing
: RPG::State
C name Class.RPG::State @name | #A
@name string
@persists int_boolean
@colour int
@priority int
@restriction rpg_state_restriction
@a_rate int
@b_rate int
@c_rate int
@d_rate int
@e_rate int
@hold_turn int
@auto_release_prob int
@release_by_damage int
@affect_type_2k3 rpg_state_affecttype
@affect_atk boolean
@affect_def boolean
@affect_spi boolean
@affect_agi boolean
@reduce_hit_ratio int
@avoid_attacks_2k3 boolean
@reflect_magic_2k3 boolean
@cursed_2k3 boolean
@battler_animation_id_2k3 animation_id
@restrict_skill boolean
@restrict_skill_level int
@restrict_magic boolean
@restrict_magic_level int
@hp_change_type rpg_state_changetype
@hp_change_max int
@hp_change_val int
@hp_change_map_val int
@hp_change_map_steps int
@sp_change_type rpg_state_changetype
@sp_change_max int
@sp_change_val int
@sp_change_map_val int
@sp_change_map_steps int
@msg_actor string
@msg_enemy string
@msg_already string
@msg_affected string
@msg_recovery string
 ---

: RPG::Animation

 ---

: RPG::Tileset
C name Class.RPG::Tileset @name | #A
@name string
@tileset_name string
 This is kind of important:
 The highpass data is obvious, lowpass/TID not so much.
 Lowpass/TID allocation is:

 0 through 17 is the special bunch, divided into these groups:

 0-3:
  0: 0-999 set.
  1: 1000-1999 set.
  2: 2000-2999 set.
  3: 3000-3049 set.
 4-5:
  4: 3050-3099 set.
  5: 3100-3149 set.
  (With out of range IDs this could extend further)
 6-17: 4000-4599 set, divided into 50s, I think
  (With out of range IDs this could extend further)

 18-161 is the 5000-5143 set.

+tableSTA R2K/TS162.txt @terrain_id_data . . 162 1 1
+tableSTAF R2K/TS162.txt @lowpass_data . . 162 1 1 down left right up upper wall counter
+tableSTAF R2K/TS144.txt @highpass_data . . 144 1 1 down left right up upper wall counter
@anim_cycles boolean
@anim_speed int= 0

 ---

: RPG::System

 ---

: RPG::CommonEvent
C name Class.RPG::CommonEvent @name @trigger | #A (@[rpg_cev_trigger]B)
 deliberately ordered to make startOnCallBlocking default
e rpg_cev_trigger 5 startOnCall 3 startOnCondition 4 startOnConditionParallel
@name string
@trigger rpg_cev_trigger
@condition_switch boolean
@condition_switch_id switch_id
@list EventListEditor

 ---

: RPG::BattleCommands
: RPG::Class
: RPG::BattlerAnimation

 ---

: RPG::Database
 completion status: 10 against 9.
@actors subwindow hash int+1 subwindow RPG::Actor
@skills subwindow hash int+1 subwindow RPG::Skill
@items subwindow hash int+1 subwindow RPG::Item
@enemies subwindow hash int+1 subwindow RPG::Enemy
@troops subwindow hash int+1 subwindow RPG::Troop
@terrains subwindow hash int+1 subwindow RPG::Terrain
@attributes subwindow hash int+1 subwindow RPG::Attribute
@states subwindow hash int+1 subwindow RPG::State
@animations subwindow hash int+1 subwindow RPG::Animation
@tilesets subwindow hash int+1 subwindow RPG::Tileset
@terms subwindow rpg_terms
@system subwindow RPG::System
@switches subwindow arrayIx1 string
@variables subwindow arrayIx1 string
@common_events subwindow hash int+1 subwindow RPG::CommonEvent
@db_version int
@battle_commands_2k3 subwindow RPG::BattleCommands
@classes_2k3 subwindow hash int+1 subwindow RPG::Class
@battler_anims_2k3 subwindow hash int+1 subwindow RPG::BattlerAnimation