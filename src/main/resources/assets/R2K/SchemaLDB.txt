
 * This is released into the public domain.
 * No warranty is provided, implied or otherwise.

 (highly incomplete) database schema

 LIST OF THINGS TO PERFORM WHEN DONE
 Dictionary unification
 'MapContext'

 ---

.rpg_actor_equipment_block
]0 weapon item_or_none_id
]1 shield item_or_none_id
]2 armour item_or_none_id
]3 helmet item_or_none_id
]4 accessory item_or_none_id

 Actors apparently have a second unused equip set
 I'm ignoring this for now

]5 _ item_or_none_id
]6 _ item_or_none_id
]7 _ item_or_none_id
]8 _ item_or_none_id
]9 _ item_or_none_id


.rpg_actor_parameter_block
C name Interp.rpg_actor_parameter_block ]0 ]1 ]2 ]3 ]4 ]5 | HP:#A MP:#B ATK:#C DEF:#D SPI:#E AGI:#F
]0 maxHp int
]1 maxMp int
]2 atk int
]3 def int
]4 spi int
]5 agi int

: RPG::Learning
@level int= 1
@skill skill_id

.actorpage_graphics
@character_name string
@character_index int
@character_blend_mode boolean
+internal_EPGD

: RPG::Actor
C name Class.RPG::Actor @name | #A
@name string
@title string
+subwindow[ Graphics ] actorpage_graphics
@face_name string
@face_index int
@init_level int
@init_level_exp int
@each_level_exp_p int
@each_level_exp_modc int
@final_level int
@battle_auto boolean
@battle_super_guard boolean
@battle_parameters subwindow array 0 subwindow[ @rpg_actor_parameter_block ] rpg_actor_parameter_block
@battle_skillspanel_name string
@battle_posx_2k3 int
@battle_posy_2k3 int
@battler_anim_2k3 battleranimation_id
@can_crit boolean
@crit_percent boolean
@dual_wield boolean
@lock_equipment boolean
@equipment rpg_actor_equipment_block
@no_weapon_attack_anim animation_id
@class_2k3 class_or_none_id
@learn_skills subwindow array 0 RPG::Learning
@rename_allow boolean
@state_ranks subwindow array 0 int
@attribute_ranks subwindow array 0 int
@battle_commands_2k3 subwindow array 0 battlecommand_id

 ---

> rpg_skill_mod_attributes array 0 boolean

: RPG::BattlerAnimationData
e rpg_badia_movetype 0 none 1 step 2 jump 3 move
@move_type rpg_badia_movetype
@afterimage_type int_boolean
@pose int

: RPG::Skill
C name Class.RPG::Skill @name | #A
+rpg_skill_sect0
+subwindow[ User Feedback ] rpg_skill_sect2
+subwindow[ Cost / Chance ] rpg_skill_sect3
+subwindow[ Result ] rpg_skill_sect4

.rpg_skill_sect0
@name string
@description string
e rpg_skill_type 0 normal 1 teleportMenu 2 battleEscape 3 switchControl 4 subSkill2k3
@type rpg_skill_type
e rpg_skill_scope 0 hurtEnemy 1 hurtAllEnemies 2 healUserActor 3 healAnyActor 4 healAllActors
@scope_n_healing rpg_skill_scope
@switch_control_target switch_id
@usable_in_battle boolean
@usable_outside_battle boolean
@required_attrs subwindow rpg_skill_mod_attributes

.rpg_skill_sect2
@animation animation_id
@sound RPG::Sound
@use_text_1_2KO string
@use_text_2_2KO string
e rpg_skill_fm 0 A 1 B 2 C 3 dodge
@failure_message_2KO rpg_skill_fm
@battler_anim_default actor_id
@battler_anim_data subwindow hash actor_id RPG::BattlerAnimationData

.rpg_skill_sect3
@sp_cost_percent boolean
@sp_cost_val_percent int
@sp_cost_val_normal int
@hit_chance int= 100
@base_dmg int
@phys_dmg_frac20 int
@mag_dmg_frac20 int
@ignore_def boolean
@variance int

.rpg_skill_sect4
@mod_hp boolean
@mod_sp boolean
@mod_atk boolean
@mod_def boolean
@mod_spi boolean
@mod_agi boolean
@req_target_sp_nz boolean
@add_states_2k3 boolean
@mod_states subwindow array 0 boolean
@affect_target_attr_defence boolean

 ---

 Is this even used???
: RPG::ItemAnimation
@type int
@movement rpg_badia_movetype
@battle_anim animation_id
@after_image int_boolean
@attacks int
@weapon_anim_idx int
@ranged boolean
@ranged_anim_idx int
e rpg_ia_speed 0 fast 1 medium 2 slow
@ranged_speed rpg_ia_speed

e rpg_item_type 0 normal 1 weapon 2 shield 3 armour 4 helmet 5 accessory 6 medicine 7 skillLearn2k3 8 material 9 special 10 switch
e rpg_item_rtarget 0 single 1 centre 2 allAtSameTime 3 allInSequence
E rpg_item_usecount Uses 0 Unlimited
: RPG::Item
C name Class.RPG::Item @name | #A
@name string
@description string
@animation animation_id
@type rpg_item_type
@price int
+subwindow[ Equip Stats ] rpg_item_sect0
@use_count rpg_item_usecount
@use_sp_cost int
@actors_allowed subwindow[ If unlisted, default 'true' ] hash actor_id boolean
+subwindow[ Use: 2k3 Skill (weapon/shield/armour/helmet/accessory/skillLearn2k3) ] rpg_item_sect1
+subwindow[ Use: Medicine ] rpg_item_sect2
+subwindow[ Use: Material ] rpg_item_sect3
+subwindow[ Use: Switch ] rpg_item_sect4
+subwindow[ Weapon Data ] rpg_item_sect-1
@state_set subwindow[ weapon adds / medicine removes ] hash state_id boolean

.rpg_item_sect-1
@dead_only boolean
@sit_map_2 boolean
@hit_chance int= 90
@crit_chance int
@attack_preemptive boolean
@dual_attack boolean
@attack_all boolean
@ignore_evasion boolean
@prevent_crit boolean
@raise_evasion boolean
@attr_set subwindow hash attribute_id boolean
@class_set_2k3 subwindow hash class_id boolean
@state_chance int
@state_effect boolean
@weapon_anim_def_2k3 actor_id
@weapon_anim_data_2k3 subwindow hash actor_id RPG::ItemAnimation
@ranged_target rpg_item_rtarget
@ranged_return int_boolean
@two_handed boolean

.rpg_item_sect0
@equipbuff_atk int
@equipbuff_def int
@equipbuff_spi int
@equipbuff_agi int
@no_terrain_damage boolean
@cursed_2k3 boolean
@half_sp_cost boolean

.rpg_item_sect1
@use_skill_2k3 boolean
@skill_use_item_msg_2k3 int_boolean
@skill_id_2k3 skill_id

.rpg_item_sect2
@entire_party boolean
@recover_hp_rate int
@recover_hp int
@recover_sp_rate int
@recover_sp int
@medicine_only_on_map boolean

.rpg_item_sect3
@usebuff_maxhp int
@usebuff_maxsp int
@usebuff_atk int
@usebuff_def int
@usebuff_spi int
@usebuff_agi int

.rpg_item_sect4
@switch_only_in_battle boolean
@switch_id switch_id

 ---

e rpg_enemyaction_kind 0 basic 1 skill 2 transformToNewEnemy
e rpg_enemyaction_basic 0 attack 1 dualAttack 2 defense 3 observe 4 charge 5 selfDestruct 6 escape 7 nothing

e rpg_enemyaction_conditiontype 0 always 1 switchActive 2 turnCountInRange 3 livingPartySizeInRange 4 enemyHpInRange 5 enemySpInRange 6 partyLevelInRange 7 partyFatigueInRange

: RPG::EnemyAction
@rating int= 50
@condition_type rpg_enemyaction_conditiontype
@condition_range_low int
@condition_range_high int
@condition_opt_switch_id switch_id
@act_kind rpg_enemyaction_kind
@act_basic rpg_enemyaction_basic
@act_skill skill_id
@act_transform_enemy enemy_id
@switch_on boolean
@switch_on_id switch_id
@switch_off boolean
@switch_off_id switch_id

: RPG::Enemy
C name Class.RPG::Enemy @name | #A
@name string
@battler_name string
@battler_hue int
@battler_blend_mode boolean
@max_hp int= 10
@max_sp int= 10
@atk int= 10
@def int= 10
@spi int= 10
@agi int= 10
@exp int
@gold int
@drop_item item_or_none_id
@drop_percent int
@can_crit boolean
@crit_chance int
@miss boolean
@levitate boolean
@state_ranks subwindow array 0 int
@attribute_ranks subwindow array 0 int
@actions subwindow arrayIx1 subwindow RPG::EnemyAction

 ---

.rpg_troop_pagecondition_flags_a
@switch_a boolean
@switch_b boolean
@variable_>=_val boolean
@turn boolean
@fatigue boolean
@enemy_hp boolean
@actor_hp boolean
@turn_enemy boolean

.rpg_troop_pagecondition_flags_b
@turn_actor boolean
@command_actor boolean

: RPG::Troop::PageCondition
@flags_a subwindow rpg_troop_pagecondition_flags_a
@flags_b_r2k subwindow rpg_troop_pagecondition_flags_b
@switch_a_id switch_id
@switch_b_id switch_id
@variable_id var_id
@variable_value int
@turn_a int
@turn_b int
@fatigue_min int
@fatigue_max int= 100
@enemy_index int
@enemy_hp%_min int
@enemy_hp%_max int= 100
@actor_id actor_id
@actor_hp%_min int
@actor_hp%_max int= 100
@turn_enemy_index_2k3 int
@turn_enemy_a_2k3 int
@turn_enemy_b_2k3 int
@turn_actor_id_2k3 actor_id
@turn_actor_a_2k3 int
@turn_actor_b_2k3 int
@command_actor_id_2k3 actor_id
@command_id_2k3 battlecommand_id

: RPG::Troop::Page
@condition RPG::Troop::PageCondition
@list EventListEditor

: RPG::Troop::Member
@enemy enemy_id
@x int
@y int
@invisible boolean

: RPG::Troop
C name Class.RPG::Troop @name | #A
@name string
@members subwindow arrayIx1 RPG::Troop::Member
@terrain_set subwindow hash terrain_id boolean
@pages subwindow arrayIx1 subwindow RPG::Troop::Page
@OFED_auto_position boolean
@OFED_appear_randomly boolean

 ---

: RPG::Terrain
: RPG::Attribute

 ---

e rpg_state_restriction 0 noRestrict 1 cannotAct 2 onlyAttackEnemy 3 onlyAttackAlly
e rpg_state_affecttype 0 halfParams 1 doubleParams 2 leaveParamsAlone
e rpg_state_changetype 0 lose 1 gain 2 nothing
: RPG::State
C name Class.RPG::State @name | #A
@name string
@persists int_boolean
@colour int
@priority int
@restriction rpg_state_restriction
@a_rate int
@b_rate int
@c_rate int
@d_rate int
@e_rate int
@hold_turn int
@auto_release_prob int
@release_by_damage int
@affect_type_2k3 rpg_state_affecttype
@affect_atk boolean
@affect_def boolean
@affect_spi boolean
@affect_agi boolean
@reduce_hit_ratio int
@avoid_attacks_2k3 boolean
@reflect_magic_2k3 boolean
@cursed_2k3 boolean
@battler_animation_id_2k3 animation_id
@restrict_skill boolean
@restrict_skill_level int
@restrict_magic boolean
@restrict_magic_level int
@hp_change_type rpg_state_changetype
@hp_change_max int
@hp_change_val int
@hp_change_map_val int
@hp_change_map_steps int
@sp_change_type rpg_state_changetype
@sp_change_max int
@sp_change_val int
@sp_change_map_val int
@sp_change_map_steps int
@msg_actor string
@msg_enemy string
@msg_already string
@msg_affected string
@msg_recovery string
 ---

: RPG::AnimationTiming
@frame int
@sound RPG::Sound
e rpg_animationtiming_flashscope 0 noFlash 1 target 2 screen
@flash_scope rpg_animationtiming_flashscope
@flash_red int= 31
@flash_green int= 31
@flash_blue int= 31
@flash_power int= 31
e rpg_animationtiming_screenshake 0 noShake 1 target 2 screen
@screen_shake rpg_animationtiming_screenshake

: RPG::AnimationCell
@visible boolean
@cell_id int= 0
@x int= 0
@y int= 0
@scale int= 100
@tone_r int= 100
@tone_g int= 100
@tone_b int= 100
@tone_grey int= 100
@transparency int= 0

: RPG::AnimationFrame
@cells subwindow arrayIx1 subwindow RPG::AnimationCell

e rpg_animation_scope 0 target 1 screen
e rpg_animation_position 0 up 1 middle 2 down

: RPG::Animation
C name Class.RPG::Animation @name | #A
@name string
@animation_name string
@unknown_03 int= -1
@scope rpg_animation_scope
@position rpg_animation_position
@frames subwindow arrayIx1 subwindow RPG::AnimationFrame
@timings subwindow arrayIx1 subwindow RPG::AnimationTiming

 ---

: RPG::Tileset
C name Class.RPG::Tileset @name | #A
@name string
@tileset_name string
 This is kind of important:
 The highpass data is obvious, lowpass/TID not so much.
 Lowpass/TID allocation is:

 0 through 17 is the special bunch, divided into these groups:

 0-3:
  0: 0-999 set.
  1: 1000-1999 set.
  2: 2000-2999 set.
  3: 3000-3049 set.
 4-5:
  4: 3050-3099 set.
  5: 3100-3149 set.
  (With out of range IDs this could extend further)
 6-17: 4000-4599 set, divided into 50s, I think
  (With out of range IDs this could extend further)

 18-161 is the 5000-5143 set.

+tableSTA R2K/TS162.txt @terrain_id_data . . 162 1 1
+tableSTAF R2K/TS162.txt @lowpass_data . . 162 1 1 down left right up upper wall counter
+tableSTAF R2K/TS144.txt @highpass_data . . 144 1 1 down left right up upper wall counter
@anim_cyclic boolean
@anim_speed int= 0

 ---

: RPG::System

 ---

: RPG::CommonEvent
C name Class.RPG::CommonEvent @name @trigger | #A (@[rpg_cev_trigger]B)
 deliberately ordered to make startOnCallBlocking default
e rpg_cev_trigger 5 startOnCall 3 startOnCondition 4 startOnConditionParallel
@name string
@trigger rpg_cev_trigger
@condition_switch boolean
@condition_switch_id switch_id
@list EventListEditor

 ---

: RPG::BattleCommands

 ---

: RPG::Class
C name Class.RPG::Class @name | #A
@name string
@dual_wield boolean
@lock_equipment boolean
@battle_auto boolean
@battle_super_guard boolean
@battle_parameters subwindow array 0 subwindow[ @rpg_actor_parameter_block ] rpg_actor_parameter_block
@battler_animation battleranimation_id
@init_level_exp int
@each_level_exp_p int
@each_level_exp_modc int
@learn_skills subwindow array 0 RPG::Learning
@state_ranks subwindow array 0 int
@attribute_ranks subwindow array 0 int
@battle_commands subwindow array 0 battlecommand_id

 ---

: RPG::BattlerAnimation

 ---

: RPG::Database
 completion status listed. 14 OK. 5 NO. Progress is being made.
 SCHEDULE:
  7 JUN: Troop, BattleCommands(Need to do)
  8 JUN: Terrain, BattlerAnimation, Attribute
  9 JUN: System ### PLANNED RELEASE DATE FOR v0.6!!!!
 OK
@actors subwindow hash int+1 subwindow RPG::Actor
 OK
@skills subwindow hash int+1 subwindow RPG::Skill
 OK
@items subwindow hash int+1 subwindow RPG::Item
 OK
@enemies subwindow hash int+1 subwindow RPG::Enemy
 OK
@troops subwindow hash int+1 subwindow RPG::Troop
 NO
@terrains subwindow hash int+1 subwindow RPG::Terrain
 NO
@attributes subwindow hash int+1 subwindow RPG::Attribute
 OK
@states subwindow hash int+1 subwindow RPG::State
 OK
@animations subwindow hash int+1 subwindow RPG::Animation
 OK
@tilesets subwindow hash int+1 subwindow RPG::Tileset
 OK
@terms subwindow rpg_terms
 NO
@system subwindow RPG::System
 OK
@switches subwindow arrayIx1 string
 OK
@variables subwindow arrayIx1 string
 OK
@common_events subwindow hash int+1 subwindow RPG::CommonEvent
 OK Supposedly an integer. Supposedly.
@db_version OPAQUE
 NO
@battle_commands_2k3 subwindow RPG::BattleCommands
 OK
@classes_2k3 subwindow hash int+1 subwindow RPG::Class
 NO
@battler_anims_2k3 subwindow hash int+1 subwindow RPG::BattlerAnimation