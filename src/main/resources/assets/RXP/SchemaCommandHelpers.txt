
 * This is released into the public domain.
 * No warranty is provided, implied or otherwise.

 Defining event command special schemas. (RXP Version)
 Yes, this was seriously the best plan I could think of other than outright hardcoding.

> string_array subwindow array 0 string

e cap_type 0 MaxHP 1 MaxSP 2 Str. 3 Dex. 4 Agi. 5 Int.

 Conditional Branch

e conditional_branch_types 0 switch 1 variable 2 selfSwitch 3 timer 4 actor 5 enemy 6 event 7 gold 8 item 9 weapon 10 armour 11 button 12 script

i RCOM/CommonConditionals.txt

 This is going to suck.

e conditional_branch_actor_types 0 inParty 1 name= 2 skill? 3 weapon= 4 armourIdWorn? 5 hasState?

.conditional_branch_actor
C name conditional_branch_actor ]1 ]2 | Actor @[actor_id]A {B=0=in party|{B=1=[@conditional_branch_actor_name]|{B=2=[@conditional_branch_actor_skill]|{B=3=[@conditional_branch_actor_weapon]|{B=4=[@conditional_branch_actor_armourIdWorn]|{B=5=[@conditional_branch_actor_hasState]|[conditional_branch_actor_types]B (...)}}}}}}
]0 type conditional_branch_types
]1 actor actor_id
]2 subCondition conditional_branch_actor_types
+arrayDAM 2 conditional_branch_actor_types conditional_branch_actor_unknown 0 conditional_branch_actor_inParty 1 conditional_branch_actor_name 2 conditional_branch_actor_skill 3 conditional_branch_actor_weapon 4 conditional_branch_actor_armourIdWorn 5 conditional_branch_actor_hasState

e cbr_gold_comparison_type 0 >= 1 <

.conditional_branch_parameters
C name conditional_branch_parameters ]0 | {A=0=[@conditional_branch_switch]|{A=1=[@conditional_branch_variable]|{A=2=[@conditional_branch_selfSwitch]|{A=3=[@conditional_branch_timer]|{A=4=[@conditional_branch_actor]|{A=5=[@conditional_branch_enemy]|{A=6=[@conditional_branch_character]|{A=7=[@conditional_branch_gold]|{A=8=[@conditional_branch_item]|{A=9=[@conditional_branch_weapon]|{A=10=[@conditional_branch_armour]|{A=11=[@conditional_branch_button]|{A=12=[@conditional_branch_script]|Unknown}}}}}}}}}}}}}
@indent indent
@parameters arrayDAM 0 conditional_branch_types conditional_branch_unknown 0 conditional_branch_switch 1 conditional_branch_variable 2 conditional_branch_selfSwitch 3 conditional_branch_timer 4 conditional_branch_actor 5 conditional_branch_enemy 6 conditional_branch_character 7 conditional_branch_gold 8 conditional_branch_item 9 conditional_branch_weapon 10 conditional_branch_armour 11 conditional_branch_button 12 conditional_branch_script

 Set Variables. I hope I didn't make a mistake.

e set_variables_source 0 int 1 var 2 random 3 itemCount 4 actorVar 5 enemyVar 6 eventVar 7 otherVar

e set_variables_source_actor_var 0 level 1 EXP 2 HP 3 SP 4 MaxHP 5 MaxSP 6 strength 7 dex. 8 agility 9 intel. 10 atk 11 physicalDef 12 magicDef 13 evasion
e set_variables_source_enemy_var 0 HP 1 SP 2 MaxHP 3 MaxSP 4 strength 5 dexterity 6 agility 7 intelligence 8 attackPow 9 physicalDefense 10 magicDefense 11 evasionMod

 "when you step on a yellow tile, you get electrocuted!" <- this is what terrain tags are probably for. Ouch.
e set_variables_source_char_var 0 x 1 y 2 direction 3 screenX 4 screenY 5 terrainTag
e set_variables_source_other_var 0 mapID 1 partySize 2 gold 3 steps 4 playTime 5 timer 6 saveCount

i RCOM/CommonSV.txt

 Notably, the majority of the Set Variables command's pattern is in the Commands.txt file.
 Furthermore, CommonSV handles the int/var/random cases, and lets the parent schema control any further cases by replacing set_variables_parameters_ext.

C name set_variables_parameters_ext ]3 ]4 ]5 | [set_variables_source]A{A=3=: @[item_id]B}{A=4=: @[actor_id]B [set_variables_source_actor_var]C}{A=5=: [troop_enemy_id]B [set_variables_source_enemy_var]C}{A=6=: [character_id]B [set_variables_source_char_var]C}{A=7=: [set_variables_source_other_var]B}

.set_variables_itemCount
+set_variables_base
]4 itemId item_id

.set_variables_actorVar
+set_variables_base
]4 actorId actor_id
]5 actorVar set_variables_source_actor_var

.set_variables_enemyVar
+set_variables_base
]4 enemyId troop_enemy_id
]5 enemyVar set_variables_source_enemy_var

.set_variables_characterVar
+set_variables_base
]4 eventId character_id
]5 eventVar set_variables_source_char_var

.set_variables_otherVar
+set_variables_base
]4 charVar set_variables_source_other_var

.set_variables_parameters
@indent indent
@parameters arrayDAM 3 set_variables_source set_variables_base 0 set_variables_int 1 set_variables_var 2 set_variables_random 3 set_variables_itemCount 4 set_variables_actorVar 5 set_variables_enemyVar 6 set_variables_characterVar 7 set_variables_otherVar

 Change Map Settings

e cms_type 0 panorama 1 fog 2 battleback

.change_map_settings_parameters_panorama
]0 type cms_type
]1 name string
]2 hue int

.change_map_settings_parameters_fog
]0 type cms_type
]1 name string
]2 hue int
]3 opacity int
]4 blendType blend_type
]5 zoom int
]6 sx int
]7 sy int

.change_map_settings_parameters_battleback
]0 type cms_type
]1 name string

.change_map_settings_parameters
@indent indent
@parameters arrayDAM 0 cms_type change_map_settings_parameters_fog 0 change_map_settings_parameters_panorama 1 change_map_settings_parameters_fog 2 change_map_settings_parameters_battleback

 Shop items.

e shop_item_type 0 item 1 weapon 2 armour

.shop_items_parameters_unknown
]0 type shop_item_type
]1 item int

.shop_items_parameters_item
]0 type shop_item_type
]1 item item_id

.shop_items_parameters_weapon
]0 type shop_item_type
]1 weapon weapon_id

.shop_items_parameters_armour
]0 type shop_item_type
]1 armour armour_id

.shop_items_parameters
@indent indent
@parameters arrayDAM 0 shop_item_type shop_items_parameters_unknown 0 shop_items_parameters_item 1 shop_items_parameters_weapon 2 shop_items_parameters_armour

 Actor equip.

e actor_equip_type 0 Weapon 1 Armour0 2 Armour2 3 Armour3 4 Armour4

e transfer_player_fadetype 0 dark 1 none